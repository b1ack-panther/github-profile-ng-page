<!-- src/app/app.component.html -->
@if(!loading) {
<div class="github-profile">
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <div class="header-left">
        <svg class="github-logo" height="32" viewBox="0 0 16 16" width="32">
          <path
            fill="currentColor"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"
          ></path>
        </svg>
        <nav class="nav">
          <a href="#" class="nav-link">Platform</a>
          <a href="#" class="nav-link">Solutions</a>
          <a href="#" class="nav-link">Resources</a>
          <a href="#" class="nav-link">Open Source</a>
          <a href="#" class="nav-link">Enterprise</a>
          <a href="#" class="nav-link">Pricing</a>
        </nav>
      </div>
      <div class="header-right">
        <input type="text" class="search-input" placeholder="Search or jump to..." />
        <button class="btn-secondary">Sign in</button>
        <button class="btn-primary">Sign up</button>
      </div>
    </div>
  </header>

  <!-- Profile Navigation -->

  <!-- Main Content -->
  <div class="main-content">
    <!-- Left Sidebar -->
    <aside class="sidebar">
      <div class="profile-card">
        <img [src]="user?.avatar_url" alt="Profile" class="avatar" />
        <h1 class="profile-name">{{ user?.name }}</h1>
        <h2 class="profile-username">{{ user?.login }}</h2>
        <p class="profile-bio">{{ user?.bio }}</p>

        <div class="follow-spon-btn">
          <button class="btn-follow">Follow</button>
          <button class="btn-follow">
            <span class="material-symbols-outlined heart"> favorite </span>
            Sponsor
          </button>
        </div>

        <div class="stats">
          <a href="#" class="stat">
            <span class="material-symbols-outlined"> group </span>
            <strong>{{ user?.followers }}</strong> followers
          </a>
          <span class="stat-dot">Â·</span>
          <a href="#" class="stat">
            <strong>{{ user?.following }}</strong> following
          </a>
        </div>

        <div class="profile-info">
          <div class="info-item" *ngIf="user?.location">
            <svg class="info-icon" viewBox="0 0 16 16" width="16" height="16">
              <path
                fill="currentColor"
                d="M11.536 3.464a5 5 0 010 7.072L8 14.07l-3.536-3.535a5 5 0 117.072-7.072v.001zm1.06 8.132a6.5 6.5 0 10-9.192 0l3.535 3.536a1.5 1.5 0 002.122 0l3.535-3.536zM8 9a2 2 0 100-4 2 2 0 000 4z"
              ></path>
            </svg>
            {{ user?.location }}
          </div>
          <div class="info-item" *ngIf="user?.blog">
            <svg class="info-icon" viewBox="0 0 16 16" width="16" height="16">
              <path
                fill="currentColor"
                d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"
              ></path>
            </svg>
            <a [href]="user?.blog" target="_blank">{{ user?.blog }}</a>
          </div>
        </div>

        <div class="achievements">
          <h3 class="achievements-title">Achievements</h3>
          <div class="achievement-badges">
            <div class="achievement-badge" *ngFor="let achievement of achievements">
              <img class="achievement-icon" [src]="achievement.icon" alt="achievement-icon" />
            </div>
          </div>
        </div>
      </div>
    </aside>

    <!-- Main Content Area -->
    <main class="content">
      <div class="profile-nav">
        <div class="profile-nav-content">
          <nav class="tabs">
            <button
              class="tab"
              [class.active]="activeTab === 'overview'"
              (click)="setActiveTab('overview')"
            >
              <span class="material-symbols-outlined"> menu_book </span>
              Overview
            </button>
            <button
              class="tab"
              [class.active]="activeTab === 'repositories'"
              (click)="setActiveTab('repositories')"
            >
              <span class="material-symbols-outlined"> book </span>
              Repositories <span class="tab-count">{{ user?.public_repos }}</span>
            </button>
            <button
              class="tab"
              [class.active]="activeTab === 'projects'"
              (click)="setActiveTab('projects')"
            >
              <svg class="tab-icon" viewBox="0 0 16 16" width="16" height="16">
                <path
                  fill="currentColor"
                  d="M1.75 0A1.75 1.75 0 000 1.75v12.5C0 15.216.784 16 1.75 16h12.5A1.75 1.75 0 0016 14.25V1.75A1.75 1.75 0 0014.25 0H1.75zM1.5 1.75a.25.25 0 01.25-.25h12.5a.25.25 0 01.25.25v12.5a.25.25 0 01-.25.25H1.75a.25.25 0 01-.25-.25V1.75zM11.75 3a.75.75 0 00-.75.75v7.5a.75.75 0 001.5 0v-7.5a.75.75 0 00-.75-.75zm-8.25.75a.75.75 0 011.5 0v5.5a.75.75 0 01-1.5 0v-5.5zM8 3a.75.75 0 00-.75.75v3.5a.75.75 0 001.5 0v-3.5A.75.75 0 008 3z"
                ></path>
              </svg>
              Projects
            </button>
            <button
              class="tab"
              [class.active]="activeTab === 'packages'"
              (click)="setActiveTab('packages')"
            >
              <span class="material-symbols-outlined"> deployed_code </span>
              Packages
            </button>
            <button
              class="tab"
              [class.active]="activeTab === 'stars'"
              (click)="setActiveTab('stars')"
            >
              <span class="material-symbols-outlined"> star </span>
              Stars <span class="tab-count">{{ 0 }}</span>
            </button>
          </nav>
        </div>
      </div>

      <div *ngIf="activeTab === 'overview'">
        <!-- Pinned Repositories -->
        <section class="pinned-section">
          <h2 class="section-title">Pinned</h2>
          <div class="pinned-grid">
            <div class="repo-card" *ngFor="let repo of repos">
              <div class="repo-header">
                <svg class="repo-icon" viewBox="0 0 16 16" width="16" height="16">
                  <path
                    fill="currentColor"
                    d="M2 2.5A2.5 2.5 0 014.5 0h8.75a.75.75 0 01.75.75v12.5a.75.75 0 01-.75.75h-2.5a.75.75 0 110-1.5h1.75v-2h-8a1 1 0 00-.714 1.7.75.75 0 01-1.072 1.05A2.495 2.495 0 012 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 011-1h8z"
                  ></path>
                </svg>
                <a href="#" class="repo-name">{{ repo.name }}</a>
                <span class="repo-badge" *ngIf="!repo.private">Public</span>
              </div>
              <p class="repo-description">{{ repo.description }}</p>
              <div class="repo-footer">
                <span class="repo-language">
                  <span class="language-dot" [style.background-color]="'#3178c6'"></span>
                  {{ repo.language }}
                </span>
                <span class="repo-stat">
                  <svg viewBox="0 0 16 16" width="16" height="16">
                    <path
                      fill="currentColor"
                      d="M8 .25a.75.75 0 01.673.418l1.882 3.815 4.21.612a.75.75 0 01.416 1.279l-3.046 2.97.719 4.192a.75.75 0 01-1.088.791L8 12.347l-3.766 1.98a.75.75 0 01-1.088-.79l.72-4.194L.818 6.374a.75.75 0 01.416-1.28l4.21-.611L7.327.668A.75.75 0 018 .25z"
                    ></path>
                  </svg>
                  {{ repo.stargazers_count }}
                </span>
                <span class="repo-stat">
                  <svg viewBox="0 0 16 16" width="16" height="16">
                    <path
                      fill="currentColor"
                      d="M5 3.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm0 2.122a2.25 2.25 0 10-1.5 0v.878A2.25 2.25 0 005.75 8.5h1.5v2.128a2.251 2.251 0 101.5 0V8.5h1.5a2.25 2.25 0 002.25-2.25v-.878a2.25 2.25 0 10-1.5 0v.878a.75.75 0 01-.75.75h-4.5A.75.75 0 015 6.25v-.878zm3.75 7.378a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm3-8.75a.75.75 0 100-1.5.75.75 0 000 1.5z"
                    ></path>
                  </svg>
                  {{ repo.forks }}
                </span>
              </div>
            </div>
          </div>
        </section>

        <!-- Contribution Graph -->
        <div class="year-nav-container">
          <div class="contribution-section-container">
            <section class="contribution-section">
              <div class="contributions-header">
                <h2 class="section-title">
                  {{ contributionData.totalContributions }} contributions in {{ selectedYear }}
                </h2>
              </div>
              <div id="contribution-graph"></div>
              <div class="legend-container">
                <span>Learn how we count contributions</span>
                <div class="legend">
                  <span>Less</span>
                  @for (col of colorLegend; track col) {
                  <div class="col-box" [style.background-color]="col"></div>
                  }
                  <span>More</span>
                </div>
              </div>
            </section>

            <!-- Activity -->
            <section class="activity-section">
              <h2 class="section-title">Contribution activity</h2>
              <div class="activity-timeline">
                <div class="activity-item" *ngFor="let item of activityItems">
                  <div class="activity-icon">
                    <svg viewBox="0 0 16 16" width="16" height="16">
                      <path
                        fill="currentColor"
                        d="M11.93 8.5a4.002 4.002 0 01-7.86 0H.75a.75.75 0 010-1.5h3.32a4.002 4.002 0 017.86 0h3.32a.75.75 0 010 1.5h-3.32zM8 6a2 2 0 100-4 2 2 0 000-4z"
                      ></path>
                    </svg>
                  </div>
                  <div class="activity-content">
                    <div class="activity-header">
                      <span class="activity-action">{{ item.action }}</span>
                      <span class="activity-date">{{ item.date }}</span>
                    </div>
                    <a href="#" class="activity-repo">{{ item.repo }}</a>
                    @if (item.title) {
                    <p class="activity-title">{{ item.title }}</p>
                    }
                  </div>
                </div>
              </div>
            </section>
          </div>

          <div class="years-nav">
            @for (year of years; track year) {
            <span
              class="year-link"
              [class.active]="selectedYear === year"
              (click)="onYearSelected(year)"
            >
              {{ year }}
            </span>
            }
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Empty state for other tabs -->
  @if (activeTab !== 'overview') {
  <div class="main-content empty-tab">
    <div class="empty-state">
      <h2>{{ activeTab | titlecase }} Tab</h2>
      <p>This tab is functional but doesn't have content yet.</p>
    </div>
  </div>
  }
</div>
} @if(loading){
<div class="loading">
  <div class="spinner"></div>
  <p>Loading profile...</p>
</div>
}
